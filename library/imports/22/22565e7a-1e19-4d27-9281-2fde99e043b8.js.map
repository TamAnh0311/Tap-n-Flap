{"version":3,"sources":["..\\..\\..\\..\\assets\\Scripts/assets\\Scripts\\PipeGroup.js"],"names":["cc","Class","extends","Component","properties","topPipeMinHeight","bottomPipeMinHeight","spacingMinValue","spacingMaxValue","topPipe","Node","bottomPipe","init","pipeManager","_initPositionX","_initPositionY","visibleSize","director","getVisibleSize","sceneLeft","width","sceneRight","node","x","recylceX","Math","max","topPipeMaxY","height","bottomPipeMinY","find","y","spacing","random","update","dt","isRunning","pipeMoveSpeed","recyclePipe"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACR;AACAC,0BAAkB,GAFV;AAGR;AACAC,6BAAqB,GAJb;AAKR;AACAC,yBAAiB,GANT;AAOR;AACAC,yBAAiB,GART;AASR;AACAC,iBAAST,GAAGU,IAVJ;AAWR;AACAC,oBAAYX,GAAGU;AAZP,KAFP;;AAiBLE,QAjBK,gBAiBAC,WAjBA,EAiBa;AACd,aAAKA,WAAL,GAAmBA,WAAnB;AACA,aAAKC,cAAL;AACA,aAAKC,cAAL;AACH,KArBI;;;AAuBL;AACAD,kBAxBK,4BAwBW;AACZ,YAAIE,cAAchB,GAAGiB,QAAH,CAAYC,cAAZ,EAAlB,CADY,CACoC;AAChD,YAAIC,YAAY,CAACH,YAAYI,KAAb,GAAqB,CAArC,CAFY,CAE4B;AACxC,YAAIC,aAAaL,YAAYI,KAAZ,GAAoB,CAArC,CAHY,CAG4B;AACxC,aAAKE,IAAL,CAAUC,CAAV,GAAcF,aAAa,GAA3B;AACA,aAAKG,QAAL,GAAgBL,YAAYM,KAAKC,GAAL,CAAS,KAAKjB,OAAL,CAAaW,KAAtB,EAA6B,KAAKT,UAAL,CAAgBS,KAA7C,CAA5B;AACH,KA9BI;;;AAgCL;;AAEAL,kBAlCK,4BAkCW;AACZ,YAAIC,cAAchB,GAAGiB,QAAH,CAAYC,cAAZ,EAAlB;AACA,YAAIS,cAAcX,YAAYY,MAAZ,GAAqB,CAArB,GAAyB,KAAKvB,gBAAhD;AACA,YAAIwB,iBAAiB7B,GAAG8B,IAAH,CAAQ,eAAR,EAAyBC,CAAzB,GAA6B,KAAKzB,mBAAvD,CAHY,CAGgE;AAC5E,YAAI0B,UAAU,KAAKzB,eAAL,GAAuBkB,KAAKQ,MAAL,MAAiB,KAAKzB,eAAL,GAAuB,KAAKD,eAA7C,CAArC;AACA,aAAKE,OAAL,CAAasB,CAAb,GAAiBJ,cAAcF,KAAKQ,MAAL,MAAiBN,cAAcE,cAAd,GAA+BG,OAAhD,CAA/B;AACA,aAAKrB,UAAL,CAAgBoB,CAAhB,GAAoB,KAAKtB,OAAL,CAAasB,CAAb,GAAiBC,OAArC;AACH,KAzCI;AA2CLE,UA3CK,kBA2CEC,EA3CF,EA2CM;AACP,YAAI,CAAC,KAAKtB,WAAL,CAAiBuB,SAAtB,EAAiC;AAC7B;AACH;AACD;AACA,aAAKd,IAAL,CAAUC,CAAV,IAAe,KAAKV,WAAL,CAAiBwB,aAAjB,GAAiCF,EAAhD;AACA;AACA,YAAI,KAAKb,IAAL,CAAUC,CAAV,GAAc,KAAKC,QAAvB,EAAiC;AAC7B,iBAAKX,WAAL,CAAiByB,WAAjB,CAA6B,IAA7B;AACH;AACJ;AArDI,CAAT","file":"PipeGroup.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        /** Chiều cao tối thiểu ống trên */\n        topPipeMinHeight: 100,\n        /** Chiều cao ống thấp hơn */\n        bottomPipeMinHeight: 100,\n        /** Giãn cách trên và dưới của đường ống tối thiểu */\n        spacingMinValue: 250,\n        /** Khoảng cách thẳng đứng giữa các ống trên và dưới */\n        spacingMaxValue: 300,\n        /** Nút trên ống */\n        topPipe: cc.Node,\n        /** Nút ống thấp hơn */\n        bottomPipe: cc.Node,\n    },\n\n    init(pipeManager) {\n        this.pipeManager = pipeManager;\n        this._initPositionX();\n        this._initPositionY();\n    },\n\n    /** Đặt vị trí ban đầu của nút trên trục x */\n    _initPositionX(){\n        let visibleSize = cc.director.getVisibleSize(); // Kích thước vùng hiển thị của cảnh\n        let sceneLeft = -visibleSize.width / 2; // Chùm Canvas nằm ở chính giữa, bên trái của Canvas có kích thước bằng một nửa chiều rộng bên trái của neo.\n        let sceneRight = visibleSize.width / 2; // Chùm Canvas nằm ở giữa và bên phải của Canvas có chiều rộng bằng một nửa so với bên phải của neo.\n        this.node.x = sceneRight + 300;\n        this.recylceX = sceneLeft - Math.max(this.topPipe.width, this.bottomPipe.width);\n    },\n\n    /** Đặt vị trí trục y của các đường ống trên và dưới và khoảng cách giữa chúng\n */\n    _initPositionY(){\n        let visibleSize = cc.director.getVisibleSize();\n        let topPipeMaxY = visibleSize.height / 2 - this.topPipeMinHeight;\n        let bottomPipeMinY = cc.find(\"Canvas/ground\").y + this.bottomPipeMinHeight; // Prefab không thể nhận được các nút thông qua thanh tra thuộc tính, chỉ tìm kiếm động\n        let spacing = this.spacingMinValue + Math.random() * (this.spacingMaxValue - this.spacingMinValue);\n        this.topPipe.y = topPipeMaxY - Math.random() * (topPipeMaxY - bottomPipeMinY - spacing);\n        this.bottomPipe.y = this.topPipe.y - spacing;\n    },\n\n    update(dt) {\n        if (!this.pipeManager.isRunning) {\n            return;\n        }\n        // Cập nhật vị trí đường ống trong thời gian thực\n        this.node.x += this.pipeManager.pipeMoveSpeed * dt;\n        // Vượt quá khu vực hiển thị màn hình, bạn có thể tái chế đối tượng này\n        if (this.node.x < this.recylceX) {\n            this.pipeManager.recyclePipe(this);\n        }\n    }\n});"]}